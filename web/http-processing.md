# HTTP 请求的完整过程
一次 HTTP 请求的整个过程包括：DNS 解析、建立 TCP 连接、客户端请求、服务端响应、断开 TCP 连接。
本文主要从以上几个方面来讲解一次完整的 HTTP 请求。

## HTTP 起源
今天我们能够在网络中畅游，都得益于一位计算机科学家蒂姆·伯纳斯·李的构想。1991 年 8 月 6 日，**蒂姆·伯纳斯·李**在位于欧洲粒子物理研究所（CERN）的 NeXT 计算机上，正式公开运行[世界上第一个Web网站](http://info.cern.ch)，建立起基本的互联网基础概念和技术体系，由此开启了网络信息时代的序幕。

伯纳斯·李的提案包含了网络的基本概念并逐步建立了所有必要的工具：

- 提出 HTTP (Hypertext Transfer Protocol) 超文本传输协议，允许用户通过单击超链接访问资源。
- 提出使用HTML超文本标记语言(Hypertext Markup Language)作为创建网页的标准。
- 创建了统一资源定位器 URL (Uniform Resource Locator)作为网站地址系统，就是沿用至今的 http://www URL 格式。
- 创建第一个 **Web 浏览器**，称为万维网浏览器，这也是一个 Web 编辑器。
- 创建第一个 [Web 服务器](http://info.cern.ch)以及描述项目本身的第一个Web页面。

HTTP 协议一共有五大特点：

- 支持客户/服务器模式。
- 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。
- 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由 Content-Type（Content-Type是HTTP包中用来表示内容类型的标识）加以标记。
- 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
- 无状态：无状态是指协议对于事务处理没有记忆能力，服务器不知道客户端是什么状态。即我们给服务器发送 HTTP 请求之后，服务器根据请求，会给我们发送数据过来，但是，发送完，不会记录任何信息（Cookie 和 Session 孕育而生，后期再讲）。

## DNS 解析
DNS( Domain Name System) 是“域名系统”的英文缩写，是一种组织成域层次结构的计算机和网络服务命名系统，它用于 TCP/IP 网络，它所提供的服务是用来将主机名和域名转换为 IP 地址的工作。

关于 DNS 的获取流程：

DNS 是应用层协议，事实上他是为其他应用层协议工作的，包括不限于 HTTP 和 SMTP 以及 FTP，用于将用户提供的主机名解析为 ip 地址。具体过程如下：
- 用户主机上运行着 DNS 的客户端，就是我们的 PC 机或者手机客户端运行着 DNS 客户端。
- 浏览器将接收到的 url 中抽取出域名字段，就是访问的主机名，比如 `http://www.baidu.com/`，并将这个主机名传送给DNS应用的客户端
- DNS 客户机端向DNS服务器端发送一份查询报文，报文中包含着要访问的主机名字段（中间包括一些列缓存查询以及分布式 DNS 集群的工作）。
- 该 DNS 客户机最终会收到一份回答报文，其中包含有该主机名对应的 IP 地址。
- 一旦该浏览器收到来自 DNS 的 IP 地址，就可以向该IP地址定位的HTTP服务器发起 TCP 连接。

## 建立 TCP 连接
TCP/IP 是互联网相关的各类协议簇的总称。也有另一种说法 TCP/IP 是 TCP 和 IP 两种协议。

TCP 报文包 = TCP 头信息 + TCP 数据体，而在 TCP 头信息中包含了 6 种控制位（上图红色框中），这六种标志位就代表着 TCP 连接的状态：

- URG：紧急数据（urgent data）—这是一条紧急信息
- ACK：确认已收到
- PSH：提示接收端应用程序应该立即从tcp接受缓冲区中读走数据
- RST：表示要求对方重新建立连接
- SYN：表示请求建立一个连接
- FIN：表示通知对方本端要关闭连接了

TCP 建立连接过程 --- 3 次握手


## 客户端请求

## 服务端响应

## 断开 TCP 连接